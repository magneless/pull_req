# PULL_REQ сервис

## Результаты:
- Готовый сервис
- E2E тесты

## Стек:
- GO 1.25
- PostgreSQL
- библиотеки для работы с бд: sqlx, pgx
- библиотеки для работы с сетью: net/http
- golang-migrate
- Docker
- Makefile

## Запуск:
- Вариант 1:
```bash
    docker-compose up
```
или
```bash
    docker compose up
```
- Вариант 2:
```bash
    make up
```

- Запуск тестов:
```bash
    make test
```

## Струкутра:
```bash
.
├── compose.yaml
├── Makefile
├── migrations
│   ├── 000001_init.down.sql
│   └── 000001_init.up.sql
├── README.md
└── service
    ├── Dockerfile.pull_req
    ├── go.mod
    ├── go.sum
    ├── Makefile
    └── pull_req
        ├── adapters
        │   ├── db
        │   │   └── storage.go
        │   └── rest
        │       └── api.go
        ├── config
        │   └── config.go
        ├── config.yaml
        ├── core
        │   ├── errors.go
        │   ├── models.go
        │   ├── ports.go
        │   └── service.go
        └── main.go
```
## Архитектура:
Была выбрана гексагональная архитектура, выделены адаптеры:
- db
- rest

# Вопросы/Проблемы
- Предполагается, что при создании команды происходит "создание/обновление пользователей". Если при создании команды передастся пользователь с уже существующим ID, то команда этого пользователя меняется. Если он был ревьювером в каком-то пулреквесте, то, если не удалить его из ревьюверов того пулреквеста, при попытке заменить его, будет поставлен ревьевер из новой команды. В итоге, у одного пулл реквеста будут ревьюверы из старой команды и из новой. Так как: "Переназначение заменяет одного ревьювера на случайного активного участника из команды заменяемого ревьювера", из этого условия не следует, что ревьюверы не могут быть из разных команд.
Итог: в ситуации изменения команды пользователя его прошлые ревью не будут удаляться.

- "Переназначение заменяет одного ревьювера на случайного активного участника из команды заменяемого ревьювера". Здесь не указано, что заменяемый -
    - не может быть автором,
    - не может уже быть ревьювером,

Но исходя из пункта про создание пр, и из моего мнения(так как я не могу спросить заказчика про желаемое повдение), я буду отдавать ошибку, если свободны только автор и другой ревьювер.